KISSY.add("tbc/search-suggest/6.3.1/mods/storage",["base","json","tbc/search-suggest/6.3.1/mods/cross-storage","tbc/search-suggest/6.3.1/mods/promise"],function(t,e,n,s){function o(t){return r||(o.superclass.constructor.call(this,t||{}),r=this,r.initialize()),r}var r,a=e("base"),i=e("json"),c=e("tbc/search-suggest/6.3.1/mods/cross-storage"),u=e("tbc/search-suggest/6.3.1/mods/promise");KISSY.extend(o,a,{initialize:function(t){this.makeCompatible(),this.initStorage()},makeCompatible:function(){window.__StorageIsReady=function(){KISSY.log("[warning]: not use flash any more, you can remove `window.__StorageIsReady()` call, see: https://aone.alibaba-inc.com/task/12460577")}},initStorage:function(){this.storage=new c("https://www.taobao.com/markets/search/search-suggest-history-iframe",{promise:u})},save:function(t,e,n){n&&n.onFailure&&n.onFailure()},read:function(t,e,n){e&&e.onFailure&&e.onFailure()},writeAsync:function(t,e){var n=this.storage;return n.onConnect().then(function(){var s=i.stringify(e);return n.set(t,s)})},onReady:function(){return this.storage.onConnect()},readAsync:function(t){var e=this.storage;return e.onConnect().then(function(){return e.get(t)}).then(function(t){var e;try{e=i.parse(t)}catch(n){}return e})}}),s.exports=o});KISSY.add("tbc/search-suggest/6.3.1/mods/utils",["base"],function(e,t,n,i){function o(e){return r?r:(o.superclass.constructor.call(this,e||{}),void(r=this))}var r,s=t("base");KISSY.extend(o,s,{pluginInitializer:function(e){var t=this;t.set("caller",e)},getCookie:function(e){var t=window;if(t.userCookie&&!KISSY.isUndefined(t.userCookie[e]))return t.userCookie[e];if(t.SRP_COOKIES||(t.SRP_COOKIES={})&&KISSY.isUndefined(SRP_COOKIES[e])){var n=document.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");SRP_COOKIES[e]=n&&n[1]?decodeURIComponent(n[1]):""}return SRP_COOKIES[e]},fireEvent:function(e,t){var n=document;if(n.createEvent){var i=n.createEvent("MouseEvents");i.initEvent(t,!0,!1),e.dispatchEvent(i)}else n.createEventObject&&e.fireEvent("on"+t)}},{ATTRS:{pluginId:{value:"utils"}}}),i.exports=o});